 <!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <title>معاينة الطباعة - جمعية الخير</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            margin: 0;
            padding: 20px;
            direction: rtl;
        }

        .print-container {
            width: 100%;
        }

        @media print {
            body {
                padding: 0;
                margin: 0;
            }

            .no-print {
                display: none;
            }

            @page {
                margin: 10mm;
            }

            /* Landscape for Wide Reports */
            .landscape-mode {
                width: 100%;
            }
        }

        /* Basic Table Styles for Print */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        th,
        td {
            border: 1px solid #333;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #f2f2f2 !important;
            -webkit-print-color-adjust: exact;
        }

        .header {
            text-align: center;
            border-bottom: 2px solid #217346;
            margin-bottom: 20px;
            padding-bottom: 10px;
        }

        .footer-signature {
            margin-top: 40px;
            display: flex;
            justify-content: space-between;
        }
    </style>
</head>

<body>
    <div id="print-content" class="print-container">
        <!-- Content will be injected here -->
        <div style="text-align: center; padding: 50px;">
            <h3>جاري تجهيز بيانات الطباعة...</h3>
        </div>
    </div>

    <script>
        window.onload = function () {
            const printData = localStorage.getItem('printPayload');
            const printType = localStorage.getItem('printType'); // 'portrait' or 'landscape'

            if (printData) {
                document.getElementById('print-content').innerHTML = printData;

                // If landscape, add a class or style
                if (printType === 'landscape') {
                    document.body.classList.add('landscape-mode');
                    const style = document.createElement('style');
                    style.innerHTML = `@page { size: landscape; }`;
                    document.head.appendChild(style);
                }

                // Allow a small delay for images/fonts if needed, then print
                setTimeout(() => {
                    window.print();
                    // Optional: window.close(); // Careful, users might want to see it first
                }, 500);
            } else {
                document.getElementById('print-content').innerHTML = '<p style="text-align:center; color:red;">خطأ: لم يتم العثور على بيانات للطباعة</p>';
            }
        };
    </script>
</body>

</html>